name: üîë Test NEW SSH Key

on:
  push:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - name: üîë Test with NEW key
      run: |
        mkdir -p ~/.ssh
        echo "${{ secrets.SERVER_SSH_KEY }}" > ~/.ssh/new_key
        chmod 600 ~/.ssh/new_key
        
        echo "=== Testing NEW key ==="
        ssh -i ~/.ssh/new_key \
            -o StrictHostKeyChecking=no \
            -o ConnectTimeout=10 \
            -p 5655 \
            ${{ secrets.SERVER_USER }}@${{ secrets.SERVER_HOST }} \
            "echo '‚úÖ NEW KEY WORKS!'" || echo "‚ùå NEW KEY FAILED"
